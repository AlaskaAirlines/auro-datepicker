{"version":3,"file":"range-date-picker-cell.js","sourceRoot":"","sources":["../../src/range-date-picker-cell.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css, PropertyValues, TemplateResult } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { format, getTime, startOfDay } from 'date-fns';\nimport { enUS } from 'date-fns/esm/locale';\nimport { Day } from './day.js';\n\nclass RangeDatepickerCell extends LitElement {\n  static styles = css`\n    :host {\n      display: block;\n    }\n\n    .day {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n      text-align: center;\n      height: 38px;\n      width: 38px;\n      margin: 0;\n      padding: 0;\n      color: var(--wc-datepicker-cell-text);\n\n      border: none;\n      outline: none;\n      background-color: transparent;\n    }\n\n    .day:focus {\n      outline: 1px solid\n        var(--wc-datepicker-cell-hovered, rgba(0, 150, 136, 0.5));\n    }\n\n    .day:not(.disabled):hover {\n      background: var(--wc-datepicker-cell-hover, #e4e7e7);\n      cursor: pointer;\n    }\n\n    .day.hovered {\n      background: var(\n        --wc-datepicker-cell-hovered,\n        rgba(0, 150, 136, 0.5)\n      ) !important;\n      color: var(--wc-datepicker-cell-hovered-text, white);\n    }\n\n    .day.selected {\n      background: var(\n        --wc-datepicker-cell-selected,\n        rgb(0, 150, 136)\n      ) !important;\n      color: var(--wc-datepicker-cell-selected-text, white);\n    }\n\n    .day.currentDate .currentDayMarker {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n      text-align: center;\n\n      width: 80%;\n      height: 80%;\n      font-weight: var(--wc-current-day-font-weight, bold);\n      border-radius: 50%;\n      background-color: var(--wc-current-day-color);\n      color: var(--wc-current-day-color-text);\n    }\n\n    .day.disabled {\n      opacity: 0.4;\n    }\n  `;\n\n  @property({ type: Object }) day: Day | null = null;\n\n  @property({ type: Boolean }) selected = false;\n\n  @property({ type: Boolean }) hovered = false;\n\n  @property({ type: String }) dateTo: string | null = null;\n\n  @property({ type: String }) dateFrom: string | null = null;\n\n  @property({ type: String }) month: string | null = null;\n\n  @property({ type: Number }) min: number | null = null;\n\n  @property({ type: Number }) max: number | null = null;\n\n  @property({ type: Boolean }) disabled = false;\n\n  @property({ type: Array }) disabledDays: Array<string> = [];\n\n  @property({ type: String }) protected hoveredDate: number | null = null;\n\n  @property({ type: Boolean }) protected isCurrentDate = false;\n\n  @property({ type: Object })\n  public get locale() {\n    return this._locale ? this._locale : enUS;\n  }\n\n  public set locale(value) {\n    const oldValue = this._locale;\n    this._locale = value;\n    this.requestUpdate('locale', oldValue);\n  }\n\n  protected _locale: any | null = null;\n\n  render(): TemplateResult {\n    return html`\n      <button\n        @click=\"${this.handleTap}\"\n        @mouseover=\"${this.handleHover}\"\n        @focus=\"${this.handleHover}\"\n        class=\"day ${this.isCurrentDate ? 'currentDate' : ''} ${this.isSelected(\n          this.selected\n        )} ${this.isHovered(this.hovered)} ${this.isEnabled(\n          this.day,\n          this.min!,\n          this.max!,\n          this.disabledDays\n        )}\"\n        ?disabled=\"${this.disabled}\"\n        title=\"${this.getTitle(this.day?.date)}\"\n      >\n        <div class=\"currentDayMarker\">${this.day?.title}</div>\n      </button>\n    `;\n  }\n\n  updated(properties: PropertyValues): void {\n    if (\n      properties.has('dateFrom') ||\n      properties.has('dateTo') ||\n      properties.has('hoveredDate') ||\n      properties.has('day')\n    ) {\n      this.dateChanged(\n        this.dateFrom!,\n        this.dateTo!,\n        this.hoveredDate!,\n        this.day!\n      );\n    }\n  }\n\n  dateChanged(\n    dateFrom: string,\n    dateTo: string,\n    hoveredDate: number,\n    day: Day\n  ): void {\n    this.selected = false;\n    this.hovered = false;\n    const parsedDateFrom = parseInt(dateFrom, 10);\n    const parsedDateTo = parseInt(dateTo, 10);\n    if (day) {\n      if (\n        getTime(startOfDay(parsedDateTo * 1000)) / 1000 === day.date ||\n        getTime(startOfDay(parsedDateFrom * 1000)) / 1000 === day.date\n      ) {\n        this.selected = true;\n      }\n\n      if (\n        ((hoveredDate === day.date || day.date < hoveredDate) &&\n          day.date > parsedDateFrom &&\n          !parsedDateTo &&\n          !Number.isNaN(parsedDateFrom) &&\n          parsedDateFrom !== undefined &&\n          !this.selected) ||\n        (day.date > parsedDateFrom && day.date < parsedDateTo)\n      ) {\n        this.hovered = true;\n      }\n    }\n  }\n\n  handleTap(): void {\n    if (!this.disabled) {\n      this.dispatchEvent(\n        new CustomEvent('date-is-selected', {\n          detail: { date: this.day?.date },\n        })\n      );\n    }\n  }\n\n  handleHover(): void {\n    this.dispatchEvent(\n      new CustomEvent('date-is-hovered', {\n        detail: { date: this.day?.date },\n      })\n    );\n  }\n\n  isSelected(selected: boolean): string {\n    return selected ? 'selected' : '';\n  }\n\n  isHovered(hovered: boolean): string {\n    return hovered ? 'hovered' : '';\n  }\n\n  isEnabled(\n    day: Day | null,\n    min: number,\n    max: number,\n    disabledDays: Array<string>\n  ): string {\n    this.disabled = false;\n\n    if (disabledDays && day && day.date) {\n      if (\n        day.date < min ||\n        day.date > max ||\n        disabledDays.findIndex(\n          disabledDay => parseInt(disabledDay, 10) === day.date\n        ) !== -1\n      ) {\n        this.disabled = true;\n        return 'disabled';\n      }\n    }\n    return '';\n  }\n\n  getTitle(date: number | undefined): string {\n    if (date === undefined) {\n      return '';\n    }\n    return format(date * 1000, 'PPPP', {\n      locale: this.locale,\n    });\n  }\n}\n\nwindow.customElements.define('wc-range-datepicker-cell', RangeDatepickerCell);\n"]}