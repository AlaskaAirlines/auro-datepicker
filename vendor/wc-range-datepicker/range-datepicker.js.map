{"version":3,"file":"range-datepicker.js","sourceRoot":"","sources":["../../src/range-datepicker.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/no-duplicates */\nimport { html, css, LitElement, PropertyValues } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { getMonth, getYear } from 'date-fns';\nimport './range-datepicker-calendar.js';\nimport { RangeDatepickerCalendar } from './range-datepicker-calendar.js';\n\nexport class RangeDatepicker extends LitElement {\n  static styles = css`\n    :host {\n      display: block;\n      position: relative;\n    }\n\n    #container {\n      display: flex;\n      flex-direction: row;\n    }\n\n    #firstDatePicker {\n      margin-right: 16px;\n    }\n  `;\n\n  /**\n   * Array of disabled days. Format is Unix timestamp.\n   */\n  @property({ type: Array }) disabledDays: Array<string> = [];\n\n  /**\n   * Display a select year control.\n   */\n  @property({ type: Boolean }) enableYearChange = false;\n\n  /**\n   * Force display of only one month.\n   */\n  @property({ type: Boolean }) forceNarrow = false;\n\n  /**\n   * Set locale of the calendar.\n   */\n  @property({ type: Object }) locale: any | null = null;\n\n  /**\n   * Max date. Format is Unix timestamp\n   */\n  @property({ type: String }) max: string | null = '8640000000000';\n\n  /**\n   * Minimal date. Format is Unix timestamp\n   */\n  @property({ type: String }) min: string | null = '-8640000000000';\n\n  /**\n   * Set month.\n   * Default is current month.\n   */\n  @property({ type: Number }) month: number;\n\n  /**\n   * If true only one date can be selected.\n   */\n  @property({ type: Boolean }) noRange = false;\n\n  /**\n   * Set year.\n   * Default is current year.\n   */\n  @property({ type: Number }) year: number;\n\n  @property({ type: String }) protected dateFrom: string | null = null;\n\n  @property({ type: String }) protected dateTo: string | null = null;\n\n  @property({ type: String }) protected hoveredDate: string | null = null;\n\n  @property({ type: Number }) protected monthPlus: number | null = null;\n\n  @property({ type: Number }) protected yearPlus: number | null = null;\n\n  @property({ type: Boolean }) protected narrow = false;\n\n  constructor() {\n    super();\n    const now = new Date();\n    this.month = getMonth(now) + 1;\n    this.year = getYear(now);\n    this.monthChanged(this.month, this.year);\n  }\n\n  render() {\n    return this.isNarrow(this.forceNarrow, this.narrow)\n      ? this.renderNarrow()\n      : this.renderNormal();\n  }\n\n  renderNormal() {\n    return html`\n      <div id=\"container\">\n        <wc-range-datepicker-calendar\n          id=\"firstDatePicker\"\n          .disabledDays=\"${this.disabledDays}\"\n          min=\"${this.min}\"\n          max=\"${this.max}\"\n          ?enableYearChange=\"${this.enableYearChange}\"\n          ?prev=\"${true}\"\n          ?noRange=\"${this.noRange}\"\n          .hoveredDate=\"${this.hoveredDate}\"\n          .dateTo=\"${this.dateTo}\"\n          .dateFrom=\"${this.dateFrom}\"\n          .locale=\"${this.locale}\"\n          month=\"${this.month}\"\n          year=\"${this.year}\"\n          @prev-month=\"${this.handlePrevMonth}\"\n          @hovered-date-changed=\"${this.hoveredDateChanged}\"\n          @date-from-changed=\"${this.dateFromChanged}\"\n          @date-to-changed=\"${this.dateToChanged}\"\n        >\n        </wc-range-datepicker-calendar>\n        <wc-range-datepicker-calendar\n          .disabledDays=\"${this.disabledDays}\"\n          min=\"${this.min}\"\n          max=\"${this.max}\"\n          ?enableYearChange=\"${this.enableYearChange}\"\n          ?next=\"${true}\"\n          ?noRange=\"${this.noRange}\"\n          .hoveredDate=\"${this.hoveredDate}\"\n          .dateTo=\"${this.dateTo}\"\n          .dateFrom=\"${this.dateFrom}\"\n          .locale=\"${this.locale}\"\n          month=\"${this.monthPlus}\"\n          year=\"${this.yearPlus}\"\n          @next-month=\"${this.handleNextMonth}\"\n          @hovered-date-changed=\"${this.hoveredDateChanged}\"\n          @date-from-changed=\"${this.dateFromChanged}\"\n          @date-to-changed=\"${this.dateToChanged}\"\n        >\n        </wc-range-datepicker-calendar>\n      </div>\n    `;\n  }\n\n  renderNarrow() {\n    return html`\n      <wc-range-datepicker-calendar\n        .disabledDays=\"${this.disabledDays}\"\n        min=\"${this.min}\"\n        max=\"${this.max}\"\n        ?enableYearChange=\"${this.enableYearChange}\"\n        ?noRange=\"${this.noRange}\"\n        ?narrow=\"${this.isNarrow(this.forceNarrow, this.narrow)}\"\n        .hoveredDate=\"${this.hoveredDate}\"\n        .dateTo=\"${this.dateTo}\"\n        .dateFrom=\"${this.dateFrom}\"\n        .locale=\"${this.locale}\"\n        ?prev=\"${true}\"\n        ?next=\"${true}\"\n        month=\"${this.monthPlus}\"\n        year=\"${this.yearPlus}\"\n        @hovered-date-changed=\"${this.hoveredDateChanged}\"\n        @date-from-changed=\"${this.dateFromChanged}\"\n        @date-to-changed=\"${this.dateToChanged}\"\n      >\n      </wc-range-datepicker-calendar>\n    `;\n  }\n\n  firstUpdated(): void {\n    const mql: MediaQueryList = window.matchMedia('(max-width: 650px)');\n    mql.addListener(mqlEvent => this.queryMatchesChanged(mqlEvent));\n    this.queryMatchesChanged(mql);\n  }\n\n  updated(properties: PropertyValues): void {\n    if (properties.has('month') || properties.has('year')) {\n      this.monthChanged(this.month, this.year);\n    }\n\n    if (properties.has('noRange')) {\n      this.noRangeChanged(this.noRange, properties.get('noRange') as boolean);\n    }\n\n    if (properties.has('narrow')) {\n      this.dispatchEvent(\n        new CustomEvent('narrow-changed', { detail: { value: this.narrow } })\n      );\n    }\n\n    if (properties.has('locale')) {\n      this.localeChanged();\n    }\n  }\n\n  isNarrow(forceNarrow: boolean, narrow: boolean): boolean {\n    return forceNarrow || narrow;\n  }\n\n  queryMatchesChanged(mql: MediaQueryList | MediaQueryListEvent): void {\n    this.narrow = mql.matches;\n    this.requestUpdate();\n  }\n\n  handlePrevMonth(): void {\n    if (!this.enableYearChange) {\n      const calendar = this.shadowRoot?.querySelector(\n        'wc-range-datepicker-calendar[next]'\n      ) as RangeDatepickerCalendar;\n      calendar?.handlePrevMonth();\n    }\n  }\n\n  handleNextMonth(): void {\n    if (!this.enableYearChange) {\n      const calendar = this.shadowRoot?.querySelector(\n        'wc-range-datepicker-calendar[prev]'\n      ) as RangeDatepickerCalendar;\n      calendar?.handleNextMonth();\n    }\n  }\n\n  hoveredDateChanged(e: CustomEvent): void {\n    this.hoveredDate = e.detail.value;\n  }\n\n  monthChanged(month: number, year: number): void {\n    if (year && month) {\n      this.monthPlus = (month % 12) + 1;\n      if (this.monthPlus === 1) {\n        this.yearPlus = year + 1;\n      } else {\n        this.yearPlus = year;\n      }\n    }\n  }\n\n  noRangeChanged(isNoRange: boolean, wasNoRange: boolean): void {\n    if (!wasNoRange && isNoRange) {\n      this.dateTo = null;\n      this.hoveredDate = null;\n    }\n  }\n\n  localeChanged(): void {\n    if (!this.month) {\n      this.month = getMonth(new Date());\n    }\n    if (!this.year) {\n      this.year = getYear(new Date());\n    }\n  }\n\n  dateToChanged(e: CustomEvent): void {\n    this.dateTo = e.detail.value;\n    this.dispatchEvent(\n      new CustomEvent('date-to-changed', { detail: { value: e.detail.value } })\n    );\n  }\n\n  dateFromChanged(e: CustomEvent): void {\n    this.dateFrom = e.detail.value;\n    this.dispatchEvent(\n      new CustomEvent('date-from-changed', {\n        detail: { value: e.detail.value },\n      })\n    );\n  }\n}\n"]}